@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

@layer base {
  :root {
    /* ============================================
       Typography System - Requirements: 17.1, 17.2, 17.3
       Cairo font with responsive type scale
       ============================================ */
    
    /* Font family */
    --font-family-base: var(--font-cairo), system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
    
    /* Type scale - Desktop (base: 16px) */
    --font-size-xs: 0.75rem;    /* 12px */
    --font-size-sm: 0.875rem;   /* 14px */
    --font-size-base: 1rem;     /* 16px - minimum for body text */
    --font-size-lg: 1.125rem;   /* 18px */
    --font-size-xl: 1.25rem;    /* 20px */
    --font-size-2xl: 1.5rem;    /* 24px */
    --font-size-3xl: 1.875rem;  /* 30px */
    --font-size-4xl: 2.25rem;   /* 36px */
    
    /* Line heights for optimal readability - Requirements: 17.4 */
    --line-height-tight: 1.25;
    --line-height-snug: 1.375;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.625;
    --line-height-loose: 2;
    
    /* Font weights - Requirements: 17.5 */
    --font-weight-light: 300;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    
    /* ============================================
       Core Colors - Requirements: 16.1, 16.3
       WCAG AA compliant contrast ratios
       ============================================ */
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    
    /* Primary palette with shades - Requirements: 16.1 */
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --primary-50: 214 100% 97%;
    --primary-100: 214 95% 93%;
    --primary-200: 213 97% 87%;
    --primary-300: 212 96% 78%;
    --primary-400: 213 94% 68%;
    --primary-500: 217 91% 60%;
    --primary-600: 221 83% 53%;
    --primary-700: 224 76% 48%;
    --primary-800: 226 71% 40%;
    --primary-900: 224 64% 33%;
    
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    
    /* Destructive/Error - Requirements: 16.2 */
    /* Adjusted for WCAG AA contrast (4.5:1 minimum) */
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;
    
    /* ============================================
       Semantic Colors - Requirements: 16.2
       Success, Warning, Info with WCAG AA contrast
       All colors adjusted for 4.5:1 minimum contrast
       ============================================ */
    
    /* Success - Green (contrast ratio 4.5:1+ on white) */
    /* Darkened to l:28% for better contrast with white text */
    --success: 142 76% 28%;
    --success-foreground: 0 0% 100%;
    --success-50: 138 76% 97%;
    --success-100: 141 84% 93%;
    --success-200: 141 79% 85%;
    --success-300: 142 77% 73%;
    --success-400: 142 69% 58%;
    --success-500: 142 71% 45%;
    --success-600: 142 76% 36%;
    --success-700: 142 72% 29%;
    --success-800: 143 64% 24%;
    --success-900: 144 61% 20%;
    
    /* Warning - Amber (contrast ratio 4.5:1+ with dark text) */
    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 0%;
    --warning-50: 48 100% 96%;
    --warning-100: 48 96% 89%;
    --warning-200: 48 97% 77%;
    --warning-300: 46 97% 65%;
    --warning-400: 43 96% 56%;
    --warning-500: 38 92% 50%;
    --warning-600: 32 95% 44%;
    --warning-700: 26 90% 37%;
    --warning-800: 23 83% 31%;
    --warning-900: 22 78% 26%;
    
    /* Info - Cyan (contrast ratio 4.5:1+ on white) */
    /* Darkened to l:35% for better contrast with white text */
    --info: 199 89% 35%;
    --info-foreground: 0 0% 100%;
    --info-50: 204 100% 97%;
    --info-100: 204 94% 94%;
    --info-200: 201 94% 86%;
    --info-300: 199 95% 74%;
    --info-400: 198 93% 60%;
    --info-500: 199 89% 48%;
    --info-600: 200 98% 39%;
    --info-700: 201 96% 32%;
    --info-800: 201 90% 27%;
    --info-900: 202 80% 24%;
    
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 221.2 83.2% 53.3%;
    
    /* Chart colors */
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    
    --radius: 0.5rem;
    
    /* Safe area insets for notched devices */
    --sat: env(safe-area-inset-top, 0px);
    --sar: env(safe-area-inset-right, 0px);
    --sab: env(safe-area-inset-bottom, 0px);
    --sal: env(safe-area-inset-left, 0px);
    
    /* Dynamic viewport height for mobile */
    --vh: 1vh;
  }
  
  .dark {
    /* ============================================
       Dark Mode Colors - Requirements: 16.1, 16.3
       WCAG AA compliant contrast ratios
       ============================================ */
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    
    /* Primary palette - dark mode */
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --primary-50: 224 71% 10%;
    --primary-100: 224 64% 15%;
    --primary-200: 226 71% 20%;
    --primary-300: 224 76% 28%;
    --primary-400: 221 83% 38%;
    --primary-500: 217 91% 50%;
    --primary-600: 217 91% 60%;
    --primary-700: 213 94% 68%;
    --primary-800: 212 96% 78%;
    --primary-900: 213 97% 87%;
    
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    
    /* ============================================
       Semantic Colors - Dark Mode - Requirements: 16.2
       ============================================ */
    
    /* Success - Green (dark mode) */
    --success: 142 71% 45%;
    --success-foreground: 144 61% 10%;
    --success-50: 144 61% 10%;
    --success-100: 143 64% 14%;
    --success-200: 142 72% 19%;
    --success-300: 142 76% 26%;
    --success-400: 142 71% 35%;
    --success-500: 142 71% 45%;
    --success-600: 142 69% 58%;
    --success-700: 142 77% 73%;
    --success-800: 141 79% 85%;
    --success-900: 141 84% 93%;
    
    /* Warning - Amber (dark mode) */
    --warning: 43 96% 56%;
    --warning-foreground: 22 78% 10%;
    --warning-50: 22 78% 10%;
    --warning-100: 23 83% 15%;
    --warning-200: 26 90% 22%;
    --warning-300: 32 95% 30%;
    --warning-400: 38 92% 40%;
    --warning-500: 43 96% 56%;
    --warning-600: 46 97% 65%;
    --warning-700: 48 97% 77%;
    --warning-800: 48 96% 89%;
    --warning-900: 48 100% 96%;
    
    /* Info - Cyan (dark mode) */
    --info: 198 93% 60%;
    --info-foreground: 202 80% 10%;
    --info-50: 202 80% 10%;
    --info-100: 201 90% 15%;
    --info-200: 201 96% 22%;
    --info-300: 200 98% 29%;
    --info-400: 199 89% 38%;
    --info-500: 198 93% 50%;
    --info-600: 198 93% 60%;
    --info-700: 199 95% 74%;
    --info-800: 201 94% 86%;
    --info-900: 204 94% 94%;
    
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 224.3 76.3% 48%;
    
    /* Chart colors - dark mode */
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-family-base);
  }
  html {
    scroll-behavior: smooth;
    /* Ensure minimum font size on mobile - Requirements: 17.3 */
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }
  
  /* Respect reduced motion for smooth scrolling */
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
  }
  
  /* ============================================
     Typography Base Styles - Requirements: 17.1, 17.2, 17.3
     Ensures minimum 16px body text on mobile
     ============================================ */
  
  /* Body text - minimum 16px (1rem) */
  p, li, td, th, label, span:not(.icon), div {
    font-size: max(var(--font-size-base), 16px);
    line-height: var(--line-height-normal);
  }
  
  /* Headings with consistent weights - Requirements: 17.5 */
  h1 {
    font-size: var(--font-size-4xl);
    font-weight: var(--font-weight-bold);
    line-height: var(--line-height-tight);
  }
  
  h2 {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    line-height: var(--line-height-tight);
  }
  
  h3 {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-semibold);
    line-height: var(--line-height-snug);
  }
  
  h4 {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    line-height: var(--line-height-snug);
  }
  
  h5 {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-medium);
    line-height: var(--line-height-normal);
  }
  
  h6 {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    line-height: var(--line-height-normal);
  }
  
  /* Small text - still readable */
  small, .text-sm {
    font-size: var(--font-size-sm);
    line-height: var(--line-height-normal);
  }
  
  /* Extra small text - use sparingly */
  .text-xs {
    font-size: var(--font-size-xs);
    line-height: var(--line-height-normal);
  }
  
  /* Mobile typography adjustments - Requirements: 17.3 */
  @media (max-width: 639px) {
    /* Ensure body text is at least 16px on mobile */
    body {
      font-size: 16px;
    }
    
    /* Scale down headings slightly on mobile */
    h1 {
      font-size: var(--font-size-2xl);
    }
    
    h2 {
      font-size: var(--font-size-xl);
    }
    
    h3 {
      font-size: var(--font-size-lg);
    }
    
    h4, h5, h6 {
      font-size: var(--font-size-base);
    }
    
    /* Ensure minimum 16px for all body text elements */
    p, li, td, th, label, span:not(.icon):not(.badge), div:not(.icon) {
      font-size: 16px;
      min-font-size: 16px;
    }
  }
}

/* ============================================
   Responsive Utilities - Requirements: 8.2
   ============================================ */

@layer utilities {
  /* Touch-friendly tap targets */
  .touch-target {
    min-width: 44px;
    min-height: 44px;
  }
  
  /* Safe area padding */
  .safe-area-top {
    padding-top: var(--sat);
  }
  .safe-area-bottom {
    padding-bottom: var(--sab);
  }
  .safe-area-left {
    padding-left: var(--sal);
  }
  .safe-area-right {
    padding-right: var(--sar);
  }
  .safe-area-x {
    padding-left: var(--sal);
    padding-right: var(--sar);
  }
  .safe-area-y {
    padding-top: var(--sat);
    padding-bottom: var(--sab);
  }
  .safe-area {
    padding: var(--sat) var(--sar) var(--sab) var(--sal);
  }
  
  /* Dynamic viewport height (fixes iOS 100vh issue) */
  .h-screen-dynamic {
    height: 100vh;
    height: calc(var(--vh, 1vh) * 100);
  }
  .min-h-screen-dynamic {
    min-height: 100vh;
    min-height: calc(var(--vh, 1vh) * 100);
  }
}

/* ============================================
   3D Viewer Responsive Styles
   ============================================ */

@layer components {
  /* Base viewer container */
  .car-viewer-container {
    @apply w-full rounded-xl overflow-hidden border shadow-lg;
    @apply bg-gradient-to-b from-slate-100 via-slate-50 to-white;
    @apply border-slate-200;
    height: 450px;
  }
  
  /* Mobile adjustments */
  @media (max-width: 639px) {
    .car-viewer-container {
      height: 350px;
      @apply rounded-lg;
    }
    
    /* Hide keyboard hints on mobile */
    .car-viewer-container .keyboard-hints {
      display: none;
    }
    
    /* Larger touch targets for part selection */
    .car-viewer-container .part-label {
      @apply text-xs px-2 py-1;
      min-height: 32px;
    }
  }
  
  /* Tablet adjustments */
  @media (min-width: 640px) and (max-width: 1023px) {
    .car-viewer-container {
      height: 400px;
    }
    
    .car-viewer-container .keyboard-hints {
      @apply text-xs opacity-60;
    }
  }
  
  /* Desktop and larger */
  @media (min-width: 1024px) {
    .car-viewer-container {
      height: 450px;
    }
  }
  
  /* Landscape mobile optimization */
  @media (max-width: 896px) and (orientation: landscape) {
    .car-viewer-container {
      height: 280px;
    }
  }
}

/* ============================================
   2D Fallback Responsive Styles
   ============================================ */

@layer components {
  .car-2d-fallback {
    @apply w-full rounded-lg overflow-hidden border p-4;
    @apply bg-gradient-to-b from-gray-100 to-gray-200;
    @apply border-gray-300;
  }
  
  @media (max-width: 639px) {
    .car-2d-fallback {
      @apply p-2;
    }
    
    .car-2d-fallback svg {
      max-height: 300px;
    }
    
    .car-2d-fallback .tooltip {
      @apply text-xs p-1.5;
    }
  }
  
  @media (min-width: 640px) and (max-width: 1023px) {
    .car-2d-fallback {
      @apply p-3;
    }
    
    .car-2d-fallback svg {
      max-height: 350px;
    }
  }
}

/* ============================================
   Touch Device Optimizations - Requirements: 6.3, 6.6
   ============================================ */

@media (hover: none) and (pointer: coarse) {
  /* Increase touch targets */
  button, 
  [role="button"],
  a,
  input[type="checkbox"],
  input[type="radio"],
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Remove hover effects on touch devices */
  .hover-effect:hover {
    transform: none;
  }
  
  /* Disable hover states that might stick on touch */
  .car-viewer-container .part-mesh:hover {
    /* Let the active/focus states handle this instead */
  }
}

/* Mobile touch targets - always apply on small screens */
@media (max-width: 639px) {
  button:not(.no-touch-target), 
  [role="button"]:not(.no-touch-target),
  input[type="checkbox"],
  input[type="radio"],
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
}

/* ============================================
   Browser-Specific Fixes - Requirements: 8.1
   ============================================ */

/* Safari WebGL context fix */
.safari-webgl-fix canvas {
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

/* Firefox scrollbar styling */
.firefox-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--muted)) transparent;
}

/* Edge compatibility */
.edge-compat {
  /* Edge-specific fixes if needed */
}

/* ============================================
   Reduced Motion Preference - Requirements: 7.4
   Disables animations for users who prefer reduced motion
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  /* Global animation and transition disabling */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  /* Disable smooth scrolling */
  html {
    scroll-behavior: auto !important;
  }
  
  /* Disable all keyframe animations */
  .animate-shimmer,
  .animate-pulse,
  .animate-spin,
  .animate-ping,
  .animate-bounce,
  [class*="animate-"] {
    animation: none !important;
  }
  
  /* Disable hover transforms */
  .hover\:scale-105:hover,
  .hover\:scale-110:hover,
  .hover\:-translate-y-1:hover,
  .hover\:-translate-y-2:hover,
  .group:hover .group-hover\:scale-105,
  .group:hover .group-hover\:scale-110 {
    transform: none !important;
  }
  
  /* Disable transition effects on interactive elements */
  button,
  a,
  input,
  select,
  textarea,
  [role="button"],
  .transition,
  .transition-all,
  .transition-colors,
  .transition-opacity,
  .transition-transform {
    transition: none !important;
  }
  
  /* Disable card hover effects */
  .car-card:hover,
  .card:hover,
  [class*="hover:shadow"] {
    transform: none !important;
    box-shadow: inherit !important;
  }
  
  /* Disable skeleton shimmer animation */
  .skeleton::before,
  [class*="skeleton"]::before {
    animation: none !important;
    background: transparent !important;
  }
  
  /* Disable modal/dialog animations */
  [role="dialog"],
  [role="alertdialog"],
  .modal,
  .dialog {
    animation: none !important;
  }
  
  /* Disable toast animations */
  .toast,
  [role="alert"] {
    animation: none !important;
  }
  
  /* Disable menu animations */
  .mobile-menu,
  .dropdown-menu,
  [role="menu"] {
    animation: none !important;
  }
  
  /* Disable image gallery transitions */
  .gallery-image,
  .lightbox {
    transition: none !important;
  }
  
  /* Disable 3D viewer animations */
  .car-viewer-container {
    /* Disable auto-rotate and smooth transitions */
  }
  
  .car-viewer-container canvas {
    animation: none !important;
  }
  
  /* Disable loading spinners - show static state instead */
  .loading-spinner,
  .spinner {
    animation: none !important;
  }
  
  /* Disable progress bar animations */
  .progress-bar,
  [role="progressbar"] {
    transition: none !important;
  }
  
  /* Disable accordion/collapse animations */
  .accordion-content,
  .collapse-content,
  [data-state="open"],
  [data-state="closed"] {
    transition: none !important;
  }
  
  /* Disable tooltip animations */
  .tooltip,
  [role="tooltip"] {
    animation: none !important;
    transition: none !important;
  }
  
  /* Disable focus ring animations */
  *:focus,
  *:focus-visible {
    transition: none !important;
  }
}

/* Utility classes for reduced motion */
@layer utilities {
  /* Apply only when motion is allowed */
  .motion-safe\:animate-shimmer {
    animation: shimmer 1.5s infinite;
  }
  
  .motion-safe\:transition {
    transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
  }
  
  .motion-safe\:transition-transform {
    transition-property: transform;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
  }
  
  .motion-safe\:transition-opacity {
    transition-property: opacity;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
  }
  
  /* Disable animations when reduced motion is preferred */
  .motion-reduce\:animate-none {
    animation: none !important;
  }
  
  .motion-reduce\:transition-none {
    transition: none !important;
  }
  
  .motion-reduce\:transform-none {
    transform: none !important;
  }
  
  /* Instant transitions for reduced motion (still shows state change) */
  .motion-reduce\:duration-0 {
    transition-duration: 0ms !important;
    animation-duration: 0ms !important;
  }
}


/* ============================================
   RTL Support Styles - Requirements: 16.5
   Comprehensive RTL layout support using CSS logical properties
   ============================================ */

/* Base RTL styles */
[dir="rtl"] {
  /* Ensure proper text rendering for Arabic */
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* RTL-aware flexbox utilities using logical properties */
@layer utilities {
  /* ============================================
     Logical Margin Utilities - Requirements: 16.5
     Use margin-inline-start/end instead of margin-left/right
     ============================================ */
  .ms-auto { margin-inline-start: auto; }
  .me-auto { margin-inline-end: auto; }
  .ms-0 { margin-inline-start: 0; }
  .me-0 { margin-inline-end: 0; }
  .ms-1 { margin-inline-start: 0.25rem; }
  .me-1 { margin-inline-end: 0.25rem; }
  .ms-2 { margin-inline-start: 0.5rem; }
  .me-2 { margin-inline-end: 0.5rem; }
  .ms-3 { margin-inline-start: 0.75rem; }
  .me-3 { margin-inline-end: 0.75rem; }
  .ms-4 { margin-inline-start: 1rem; }
  .me-4 { margin-inline-end: 1rem; }
  .ms-5 { margin-inline-start: 1.25rem; }
  .me-5 { margin-inline-end: 1.25rem; }
  .ms-6 { margin-inline-start: 1.5rem; }
  .me-6 { margin-inline-end: 1.5rem; }
  .ms-8 { margin-inline-start: 2rem; }
  .me-8 { margin-inline-end: 2rem; }
  
  /* ============================================
     Logical Padding Utilities - Requirements: 16.5
     Use padding-inline-start/end instead of padding-left/right
     ============================================ */
  .ps-0 { padding-inline-start: 0; }
  .pe-0 { padding-inline-end: 0; }
  .ps-1 { padding-inline-start: 0.25rem; }
  .pe-1 { padding-inline-end: 0.25rem; }
  .ps-2 { padding-inline-start: 0.5rem; }
  .pe-2 { padding-inline-end: 0.5rem; }
  .ps-3 { padding-inline-start: 0.75rem; }
  .pe-3 { padding-inline-end: 0.75rem; }
  .ps-4 { padding-inline-start: 1rem; }
  .pe-4 { padding-inline-end: 1rem; }
  .ps-5 { padding-inline-start: 1.25rem; }
  .pe-5 { padding-inline-end: 1.25rem; }
  .ps-6 { padding-inline-start: 1.5rem; }
  .pe-6 { padding-inline-end: 1.5rem; }
  .ps-8 { padding-inline-start: 2rem; }
  .pe-8 { padding-inline-end: 2rem; }
  
  /* ============================================
     Logical Position Utilities - Requirements: 16.5
     Use inset-inline-start/end instead of left/right
     ============================================ */
  .start-0 { inset-inline-start: 0; }
  .end-0 { inset-inline-end: 0; }
  .start-1 { inset-inline-start: 0.25rem; }
  .end-1 { inset-inline-end: 0.25rem; }
  .start-2 { inset-inline-start: 0.5rem; }
  .end-2 { inset-inline-end: 0.5rem; }
  .start-3 { inset-inline-start: 0.75rem; }
  .end-3 { inset-inline-end: 0.75rem; }
  .start-4 { inset-inline-start: 1rem; }
  .end-4 { inset-inline-end: 1rem; }
  .start-auto { inset-inline-start: auto; }
  .end-auto { inset-inline-end: auto; }
  
  /* ============================================
     Logical Border Utilities - Requirements: 16.5
     Use border-inline-start/end instead of border-left/right
     ============================================ */
  .border-s { border-inline-start-width: 1px; }
  .border-e { border-inline-end-width: 1px; }
  .border-s-0 { border-inline-start-width: 0; }
  .border-e-0 { border-inline-end-width: 0; }
  .border-s-2 { border-inline-start-width: 2px; }
  .border-e-2 { border-inline-end-width: 2px; }
  .border-s-4 { border-inline-start-width: 4px; }
  .border-e-4 { border-inline-end-width: 4px; }
  
  /* Logical border radius utilities */
  .rounded-s { border-start-start-radius: var(--radius); border-end-start-radius: var(--radius); }
  .rounded-e { border-start-end-radius: var(--radius); border-end-end-radius: var(--radius); }
  .rounded-ss { border-start-start-radius: var(--radius); }
  .rounded-se { border-start-end-radius: var(--radius); }
  .rounded-es { border-end-start-radius: var(--radius); }
  .rounded-ee { border-end-end-radius: var(--radius); }
  
  /* ============================================
     Logical Text Alignment - Requirements: 16.5
     Use text-align: start/end instead of left/right
     ============================================ */
  .text-start { text-align: start; }
  .text-end { text-align: end; }
  
  /* ============================================
     RTL-aware Icon Flip - Requirements: 16.5
     Flip directional icons in RTL mode
     ============================================ */
  .rtl-flip {
    transform: scaleX(1);
  }
  [dir="rtl"] .rtl-flip {
    transform: scaleX(-1);
  }
  
  /* Auto-flip for common directional icons */
  .rtl-auto-flip {
    transform: scaleX(1);
  }
  [dir="rtl"] .rtl-auto-flip {
    transform: scaleX(-1);
  }
  
  /* ============================================
     Logical Float Utilities - Requirements: 16.5
     ============================================ */
  .float-start { float: inline-start; }
  .float-end { float: inline-end; }
  
  /* ============================================
     Logical Scroll Margin/Padding - Requirements: 16.5
     ============================================ */
  .scroll-ms-0 { scroll-margin-inline-start: 0; }
  .scroll-me-0 { scroll-margin-inline-end: 0; }
  .scroll-ms-4 { scroll-margin-inline-start: 1rem; }
  .scroll-me-4 { scroll-margin-inline-end: 1rem; }
  .scroll-ps-0 { scroll-padding-inline-start: 0; }
  .scroll-pe-0 { scroll-padding-inline-end: 0; }
  .scroll-ps-4 { scroll-padding-inline-start: 1rem; }
  .scroll-pe-4 { scroll-padding-inline-end: 1rem; }
  
  /* ============================================
     Flexbox Direction Utilities - Requirements: 16.5
     Automatically reverse flex direction in RTL
     ============================================ */
  .flex-row-rtl {
    flex-direction: row;
  }
  [dir="rtl"] .flex-row-rtl {
    flex-direction: row-reverse;
  }
  
  /* ============================================
     Gap Utilities with Logical Properties
     ============================================ */
  .gap-x-logical-1 { column-gap: 0.25rem; }
  .gap-x-logical-2 { column-gap: 0.5rem; }
  .gap-x-logical-3 { column-gap: 0.75rem; }
  .gap-x-logical-4 { column-gap: 1rem; }
}

/* ============================================
   RTL-specific Component Adjustments - Requirements: 16.5
   ============================================ */
@layer components {
  /* Sidebar and navigation */
  [dir="rtl"] .sidebar {
    border-left: none;
    border-right: 1px solid hsl(var(--border));
  }
  
  /* Form inputs - text alignment */
  [dir="rtl"] input,
  [dir="rtl"] textarea,
  [dir="rtl"] select {
    text-align: right;
  }
  
  [dir="rtl"] input[type="number"] {
    /* Keep numbers LTR for better readability */
    direction: ltr;
    text-align: right;
  }
  
  [dir="rtl"] input[type="tel"],
  [dir="rtl"] input[type="email"],
  [dir="rtl"] input[type="url"] {
    /* Keep these LTR for proper input */
    direction: ltr;
    text-align: right;
  }
  
  /* Dropdown menus */
  [dir="rtl"] .dropdown-menu {
    text-align: right;
  }
  
  /* Breadcrumbs - flip separator */
  [dir="rtl"] .breadcrumb-separator {
    transform: scaleX(-1);
  }
  
  /* Progress bars - origin from right in RTL */
  [dir="rtl"] .progress-bar {
    transform-origin: right;
  }
  
  /* Tooltips */
  [dir="rtl"] .tooltip {
    text-align: right;
  }
  
  /* Cards with icons - use logical margins */
  .card-icon-start {
    margin-inline-end: 0.5rem;
    margin-inline-start: 0;
  }
  
  /* List items with bullets - use logical padding */
  [dir="rtl"] ul:not(.no-rtl-padding) {
    padding-inline-start: 1.5rem;
    padding-inline-end: 0;
  }
  
  [dir="rtl"] ol:not(.no-rtl-padding) {
    padding-inline-start: 1.5rem;
    padding-inline-end: 0;
  }
  
  /* Flex containers that should reverse in RTL */
  .flex-rtl-reverse {
    display: flex;
  }
  [dir="rtl"] .flex-rtl-reverse {
    flex-direction: row-reverse;
  }
  
  /* Grid items alignment */
  [dir="rtl"] .grid-rtl {
    direction: rtl;
  }
  
  /* Button groups - use logical border radius */
  .btn-group > :first-child {
    border-start-start-radius: var(--radius);
    border-end-start-radius: var(--radius);
    border-start-end-radius: 0;
    border-end-end-radius: 0;
  }
  
  .btn-group > :last-child {
    border-start-end-radius: var(--radius);
    border-end-end-radius: var(--radius);
    border-start-start-radius: 0;
    border-end-start-radius: 0;
  }
  
  /* Search input with icon */
  .search-input-wrapper {
    position: relative;
  }
  
  .search-input-wrapper .search-icon {
    position: absolute;
    inset-inline-start: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
  }
  
  .search-input-wrapper input {
    padding-inline-start: 2.5rem;
  }
  
  /* Badge positioning - use logical properties */
  .badge-start {
    position: absolute;
    inset-inline-start: 0.5rem;
    top: 0.5rem;
  }
  
  .badge-end {
    position: absolute;
    inset-inline-end: 0.5rem;
    top: 0.5rem;
  }
}

/* 3D Viewer RTL adjustments */
@layer components {
  /* Keyboard hints positioning */
  [dir="rtl"] .car-viewer-container .keyboard-hints {
    left: auto;
    right: 0.5rem;
    text-align: right;
  }
  
  /* Part labels */
  [dir="rtl"] .car-viewer-container .part-label {
    direction: rtl;
    text-align: right;
  }
  
  /* Status indicators */
  [dir="rtl"] .status-indicator {
    margin-left: 0.5rem;
    margin-right: 0;
  }
  
  /* Control buttons */
  [dir="rtl"] .viewer-controls {
    flex-direction: row-reverse;
  }
}

/* 2D Fallback RTL adjustments */
@layer components {
  [dir="rtl"] .car-2d-fallback {
    direction: rtl;
  }
  
  [dir="rtl"] .car-2d-fallback .tooltip {
    text-align: right;
  }
  
  [dir="rtl"] .car-2d-fallback .legend {
    flex-direction: row-reverse;
  }
}

/* ============================================
   Form RTL Adjustments - Requirements: 16.5
   Using logical properties for form elements
   ============================================ */
@layer components {
  /* Checkbox and radio alignment - use logical properties */
  .form-check {
    padding-inline-start: 1.5rem;
    padding-inline-end: 0;
  }
  
  .form-check-input {
    float: inline-start;
    margin-inline-start: -1.5rem;
    margin-inline-end: 0;
  }
  
  /* Input groups - use logical border radius */
  .input-group > :first-child {
    border-start-end-radius: 0;
    border-end-end-radius: 0;
    border-start-start-radius: var(--radius);
    border-end-start-radius: var(--radius);
  }
  
  .input-group > :last-child {
    border-start-start-radius: 0;
    border-end-start-radius: 0;
    border-start-end-radius: var(--radius);
    border-end-end-radius: var(--radius);
  }
  
  /* Select dropdown arrow - use logical positioning */
  [dir="rtl"] select {
    background-position: left 0.75rem center;
    padding-inline-end: 0.75rem;
    padding-inline-start: 2.5rem;
  }
  
  [dir="ltr"] select {
    background-position: right 0.75rem center;
    padding-inline-start: 0.75rem;
    padding-inline-end: 2.5rem;
  }
  
  /* Form labels with required indicator */
  .form-label-required::after {
    content: '*';
    color: hsl(var(--destructive));
    margin-inline-start: 0.25rem;
  }
  
  /* Form error messages */
  .form-error {
    text-align: start;
    margin-block-start: 0.25rem;
  }
  
  /* Form help text */
  .form-help {
    text-align: start;
    margin-block-start: 0.25rem;
  }
  
  /* Input with icon - logical positioning */
  .input-with-icon-start {
    padding-inline-start: 2.5rem;
  }
  
  .input-with-icon-end {
    padding-inline-end: 2.5rem;
  }
  
  .input-icon-start {
    position: absolute;
    inset-inline-start: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
  }
  
  .input-icon-end {
    position: absolute;
    inset-inline-end: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
  }
}

/* Animation RTL adjustments */
@layer utilities {
  /* Slide animations */
  [dir="rtl"] .slide-in-left {
    animation-name: slideInRight;
  }
  
  [dir="rtl"] .slide-in-right {
    animation-name: slideInLeft;
  }
  
  [dir="rtl"] .slide-out-left {
    animation-name: slideOutRight;
  }
  
  [dir="rtl"] .slide-out-right {
    animation-name: slideOutLeft;
  }
}

@keyframes slideInLeft {
  from { transform: translateX(-100%); }
  to { transform: translateX(0); }
}

@keyframes slideInRight {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}

@keyframes slideOutLeft {
  from { transform: translateX(0); }
  to { transform: translateX(-100%); }
}

@keyframes slideOutRight {
  from { transform: translateX(0); }
  to { transform: translateX(100%); }
}

/* ============================================
   Table RTL Adjustments - Requirements: 16.5
   Using logical properties for table elements
   ============================================ */
@layer components {
  /* Table base - use text-align: start for automatic RTL support */
  table {
    text-align: start;
  }
  
  th,
  td {
    text-align: start;
  }
  
  /* Table cell padding - use logical properties */
  th:first-child,
  td:first-child {
    padding-inline-start: 1rem;
    padding-inline-end: 0.5rem;
  }
  
  th:last-child,
  td:last-child {
    padding-inline-end: 1rem;
    padding-inline-start: 0.5rem;
  }
  
  /* Table actions column */
  .table-actions {
    text-align: end;
  }
  
  /* Sortable column header */
  .table-sortable {
    cursor: pointer;
    user-select: none;
  }
  
  .table-sortable .sort-icon {
    margin-inline-start: 0.25rem;
  }
}

/* ============================================
   Modal RTL Adjustments - Requirements: 16.5
   Using logical properties for modal elements
   ============================================ */
@layer components {
  /* Modal header - use logical flex direction */
  .modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  
  /* Modal close button - use logical margin */
  .modal-close {
    margin-inline-start: auto;
    margin-inline-end: 0;
  }
  
  /* Modal footer - buttons alignment */
  .modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 0.5rem;
  }
  
  /* Modal content text alignment */
  .modal-content {
    text-align: start;
  }
  
  /* Modal slide animations - direction aware */
  .modal-slide-in {
    animation: modalSlideIn 0.2s ease-out;
  }
  
  .modal-slide-out {
    animation: modalSlideOut 0.2s ease-in;
  }
}

@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes modalSlideOut {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.95);
  }
}


/* ============================================
   Mobile Admin Panel Responsive Styles
   ============================================ */
@layer utilities {
  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  /* Safe area inset for bottom buttons */
  .safe-area-inset-bottom {
    padding-bottom: max(0.75rem, env(safe-area-inset-bottom));
  }
  
  /* Touch manipulation for better touch response */
  .touch-manipulation {
    touch-action: manipulation;
  }
}

@layer components {
  /* Mobile-optimized form modal */
  .mobile-form-modal {
    @apply fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/50;
  }
  
  .mobile-form-modal-content {
    @apply bg-background rounded-t-2xl sm:rounded-lg shadow-xl w-full sm:max-w-md max-h-[85vh] sm:max-h-[90vh] overflow-y-auto;
  }
  
  /* Mobile-optimized cards */
  .mobile-card {
    @apply rounded-lg border bg-card text-card-foreground shadow-sm;
  }
  
  .mobile-card-header {
    @apply flex flex-col space-y-1.5 p-4 sm:p-6;
  }
  
  .mobile-card-content {
    @apply p-4 sm:p-6 pt-0;
  }
  
  /* Mobile-optimized buttons */
  .mobile-btn {
    @apply min-h-[44px] px-4 py-2 text-sm font-medium rounded-lg;
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
    @apply active:scale-[0.98] transition-transform;
  }
  
  /* Mobile-optimized select */
  .mobile-select-trigger {
    @apply min-h-[44px] w-full text-right text-sm;
  }
  
  /* Mobile-optimized input */
  .mobile-input {
    @apply min-h-[44px] w-full px-3 py-2 text-sm rounded-md border;
    @apply focus:outline-none focus:ring-2 focus:ring-primary;
  }
  
  /* Mobile-optimized textarea */
  .mobile-textarea {
    @apply min-h-[80px] w-full px-3 py-2 text-sm rounded-md border resize-y;
    @apply focus:outline-none focus:ring-2 focus:ring-primary;
  }
}

/* Extra small breakpoint for very small phones */
@media (max-width: 374px) {
  .xs\:hidden {
    display: none;
  }
  
  .xs\:text-xs {
    font-size: 0.75rem;
  }
  
  .xs\:p-2 {
    padding: 0.5rem;
  }
  
  .xs\:gap-1 {
    gap: 0.25rem;
  }
}

/* Landscape mobile optimization */
@media (max-height: 500px) and (orientation: landscape) {
  .landscape\:max-h-screen {
    max-height: 100vh;
  }
  
  .landscape\:overflow-y-auto {
    overflow-y: auto;
  }
}


/* ============================================
   Mobile Touch Optimization for SVG Inspection
   ============================================ */
@layer components {
  /* SVG inspection viewer touch optimization */
  .svg-inspection-viewer {
    -webkit-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
    touch-action: manipulation;
  }
  
  .svg-inspection-viewer svg {
    pointer-events: auto;
    touch-action: manipulation;
  }
  
  .svg-inspection-viewer .body-part {
    pointer-events: auto !important;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    cursor: pointer;
  }
  
  /* Ensure SVG elements are tappable on mobile */
  @media (hover: none) and (pointer: coarse) {
    .svg-inspection-viewer .body-part {
      stroke-width: 2;
    }
    
    .svg-inspection-viewer .body-part:active {
      stroke: #1f2937;
      stroke-width: 3;
      filter: brightness(1.15);
    }
  }
  
  /* Mobile inspection form improvements */
  @media (max-width: 639px) {
    .inspection-section {
      touch-action: manipulation;
    }
    
    .inspection-section .svg-inspection-viewer {
      min-height: 280px;
    }
  }
}
